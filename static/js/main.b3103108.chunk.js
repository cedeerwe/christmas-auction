(this["webpackJsonpchristmas-auction"]=this["webpackJsonpchristmas-auction"]||[]).push([[0],{47:function(e,t,n){e.exports=n(60)},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),o=n.n(i),u=n(24),l=n(6);function c(e,t,n){for(var a=Array.from({length:n},(function(){return 0})),r=0;r<Math.min(t,e*n);r++){var i=Math.floor(Math.random()*n);a[i]<e&&a[i]+1<=e&&(a[i]+=1)}return a}function s(e){return Array.from({length:e.numPlayers},(function(){return function(e){return{balance:e.startingBalance,currentPoints:0,bidInput:"",allPoints:c(e.maxPointsPerRound,e.sumPoints,e.numRounds),hiddenPoints:""}}(e)}))}function d(e){return{round:0,maxRounds:e.numRounds,bids:Array.from({length:e.numPlayers},(function(){return 0})),auctionType:e.auctionType,finishedRound:!1}}function m(e){for(var t={first:{playerId:-1,bid:-1},second:{playerId:-1,bid:-1}},n=0;n<e.length;n++){var a=e[n];a>t.first.bid?(t.second=t.first,t.first={playerId:n,bid:a}):a>t.second.bid&&(t.second={bid:a,playerId:n})}return t}function p(e){return parseInt(e)===parseFloat(e)||isNaN(parseInt(e))}function h(e){var t=parseInt(e);return!isNaN(t)&&t===parseFloat(e)&&t>0}function b(e,t,n,a){var r=parseInt(e);return!!isNaN(r)||(r!==parseFloat(e)||(r<=a||t-r-n<0))}function y(e){return e===P.BiddingFee?1:0}function f(e){return e.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]>e[0]?t:e}))[1]}function g(e){return e.round+1===e.maxRounds}function E(e){var t=f(e.game.bids);return function(e){var t=parseInt(e);return!isNaN(t)&&t===parseFloat(e)&&t>=0}(e.players[t].hiddenPoints)}var I,P,v=["The most standard auction, where every bigger has to bid higher than the previous one. The highest bidder wins the item.","The announcer starts at a high number and decreases the bid over time. First one to raise his/her hand gets the item.","Like English auction, but every bid costs 1 additional coin to make.","A sealed bid, where each participant chooses a bid secretly. After the bids are revealed, the highest bidder wins the item and pays the 2nd highest bid price.","Like English auction, but the first two highest bids pay their bids. Still, only the highest bid gets the item.","Like English auction, but all bidders pay their highest bid. Still, only the highest bid gets the item."],w=n(12);!function(e){e[e.AuctionView=0]="AuctionView",e[e.SetupView=1]="SetupView"}(I||(I={})),function(e){e.English="English",e.Dutch="Dutch",e.BiddingFee="BiddingFee",e.Vickrey="Vickrey",e.Senior="Senior",e.AllPay="AllPay"}(P||(P={}));var O=Object.keys(P),S={numPlayers:10,maxPointsPerRound:10,numRounds:15,sumPoints:75,startingBalance:50,auctionType:P.English,showPoints:!0},j={numPlayers:S.numPlayers.toString(),maxPointsPerRound:S.maxPointsPerRound.toString(),numRounds:S.numRounds.toString(),sumPoints:S.sumPoints.toString(),startingBalance:S.startingBalance.toString(),auctionType:S.auctionType,showPoints:S.showPoints},A=[w.h,w.e,w.b,w.i,w.a,w.j,w.g,w.l,w.k,w.f,w.d,w.c],T={options:S,optionInputs:j,players:s(S),game:d(S),view:I.SetupView},C=n(16),N=n(26),k=n(10),R=Object(k.createAction)("START_NEW_AUCTION")(),_=Object(k.createAction)("START_NEW_ROUND")(),B=Object(k.createAction)("FINISH_ROUND")(),x=Object(k.createAction)("PLACE_BID")(),F=Object(k.createAction)("CHANGE_BID_INPUT")(),H=Object(k.createAction)("SWITCH_VIEW_SETUP")(),U=Object(k.createAction)("SWITCH_VIEW_AUCTION")(),V=Object(k.createAction)("CHANGE_SETUP_FIELD")(),W=Object(k.createAction)("CHANGE_SETUP_AUCTION")(),D=Object(k.createAction)("CHANGE_SETUP_SHOW_POINTS")(),M=Object(k.createAction)("CHANGE_HIDDEN_POINTS")(),G=n(27),L=n(20),z=n(14),J=n(44),K=Object(C.b)((function(e){return{state:e}}),(function(e){return{finishRound:function(){return e(B())},newRound:function(){return e(_())},placeBid:function(t){return e(x(t))},changeBidInput:function(t){return e(F(t))},backToSetup:function(){return e(H())},changeHiddenPoints:function(t){return e(M(t))}}}))((function(e){return r.a.createElement(N.a,{style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement("h1",null,e.state.game.auctionType," auction"),r.a.createElement(L.a,null,r.a.createElement(G.a,{bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Round ",e.state.game.round+1," /"," ",e.state.options.numRounds),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t},r.a.createElement(J.a,{icon:A[t],size:"3x"}))})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Balances"),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t},e.balance)}))),r.a.createElement("tr",null,r.a.createElement("th",{style:{backgroundColor:"PaleGreen"}},"Total points"),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t,style:{backgroundColor:"PaleGreen"}},e.currentPoints)}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Points to score"),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},e.state.options.showPoints?r.a.createElement("span",null,t.allPoints[e.state.game.round]):r.a.createElement("input",{type:"number",style:{maxWidth:"57px"},value:t.hiddenPoints,onChange:function(t){return e.changeHiddenPoints({playerId:n,newPoints:t.target.value})}}))}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Current bids"),e.state.game.bids.map((function(e,t){return r.a.createElement("th",{key:t},e)}))),r.a.createElement("tr",null,r.a.createElement("th",null,"New Bid"),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},r.a.createElement("div",null,r.a.createElement("input",{type:"number",style:{maxWidth:"57px"},value:t.bidInput,onChange:function(t){return e.changeBidInput({playerId:n,newInput:e.state.game.finishedRound?"":t.target.value})}})))}))),r.a.createElement("tr",null,r.a.createElement("th",null,e.state.game.finishedRound?r.a.createElement(z.a,{variant:"success",onClick:e.newRound,disabled:g(e.state.game)},"Next Round"):r.a.createElement(z.a,{variant:"danger",disabled:(t=e.state,!(t.options.showPoints&&Math.max.apply(Math,Object(u.a)(t.game.bids))>0||!t.options.showPoints&&E(t))),onClick:function(){return e.finishRound()}},"Finish!")),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},r.a.createElement(z.a,{disabled:b(t.bidInput,t.balance,y(e.state.game.auctionType),Math.max.apply(Math,Object(u.a)(e.state.game.bids))),onClick:function(){return e.placeBid({playerId:n,bid:parseInt(t.bidInput)})}},"BID!"))})))))),r.a.createElement(L.a,{className:"justify-content-between"},r.a.createElement(z.a,{variant:"secondary",onClick:e.newRound,disabled:g(e.state.game)},"Skip round"),r.a.createElement(z.a,{variant:"info",onClick:e.backToSetup},"Back to setup")));var t})),$=n(21),q=n(46),Q=n(40),X=n(22),Y=Object(C.b)((function(e){return{state:e}}),(function(e){return{changeSetupField:function(t){return e(V(t))},switchViewToAuction:function(){return e(U())},changeSetupAuction:function(t){return e(W(t))},newAuction:function(){return e(R())},changeSetupShowPoints:function(t){return e(D(t))}}}))((function(e){return r.a.createElement(N.a,null,r.a.createElement(L.a,null,r.a.createElement("h1",null,"Welcome to the Christmas Auction!"),r.a.createElement("p",null,"There is no better time for some crazy bidding than the most festive season of the year. Enjoy a competitive evening with your friends and let us see, who will be the master at the auction table. Prepare your coins, my dear friends. The Christmas auction shall begin soon!")),r.a.createElement(G.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Auction Attribute"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Number of Players"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.numPlayers,onChange:function(t){return e.changeSetupField({field:"numPlayers",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Number of Rounds"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.numRounds,onChange:function(t){return e.changeSetupField({field:"numRounds",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Max Points per Round"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.maxPointsPerRound,onChange:function(t){return e.changeSetupField({field:"maxPointsPerRound",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Total Points"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.sumPoints,onChange:function(t){return e.changeSetupField({field:"sumPoints",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Starting Balance"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.startingBalance,onChange:function(t){return e.changeSetupField({field:"startingBalance",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Auction Type"),r.a.createElement("th",null,r.a.createElement(q.a,{id:"auction-type-selector",title:e.state.optionInputs.auctionType,onSelect:function(t){return e.changeSetupAuction(parseInt(t))}},O.map((function(t,n){return r.a.createElement(Q.a,{key:n,placement:"right",overlay:r.a.createElement(X.a,{id:"popover-"+t,style:{fontFamily:"Mountains of Christmas",fontSize:20}},r.a.createElement(X.a.Title,{as:"h3",style:{fontSize:20}},t," auction"),r.a.createElement(X.a.Content,null,v[n]))},r.a.createElement($.a.Item,{eventKey:n.toString(),active:t===e.state.optionInputs.auctionType,key:n},t))}))))),r.a.createElement("tr",null,r.a.createElement("th",null,"Show Points"),r.a.createElement("th",null,r.a.createElement(Q.a,{placement:"right",overlay:r.a.createElement(X.a,{id:"popover-show-points"},r.a.createElement(X.a.Content,{style:{fontFamily:"Mountains of Christmas",fontSize:20}},"Controls whether the points are seen by everyone or all the participants have secretly generated points on their own devices."))},r.a.createElement("input",{type:"checkbox",checked:e.state.optionInputs.showPoints,onChange:function(t){return e.changeSetupShowPoints(t.target.checked)},style:{width:"30px",height:"30px"}})))))),r.a.createElement("hr",null),r.a.createElement(L.a,{className:"justify-content-between"},r.a.createElement(z.a,{variant:"success",disabled:(t=e.state.optionInputs,!(h(t.maxPointsPerRound)&&h(t.numPlayers)&&h(t.numRounds)&&h(t.startingBalance)&&h(t.sumPoints))),onClick:e.newAuction},"New Auction"),r.a.createElement(z.a,{variant:"info",onClick:e.switchViewToAuction},"Back to Auction")));var t})),Z=Object(C.b)((function(e){return{view:e.view}}))((function(e){switch(e.view){case I.SetupView:return r.a.createElement(Y,null);case I.AuctionView:return r.a.createElement(K,null)}})),ee=(n(59),function(){return r.a.createElement("div",{style:{left:0,right:0,width:"100%",height:"100vh",backgroundImage:"url(background.jpg)",backgroundColor:"hsla(0,0%,100%,0.80)",backgroundBlendMode:"overlay",opacity:1,fontFamily:"Mountains of Christmas",fontSize:25}},r.a.createElement(Z,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te,ne=n(25),ae=n(8),re=Object(k.createReducer)(T,(te={},Object(ae.a)(te,"START_NEW_AUCTION",(function(e){var t,n=(t=e.optionInputs,{maxPointsPerRound:parseInt(t.maxPointsPerRound),numRounds:parseInt(t.numRounds),numPlayers:parseInt(t.numPlayers),sumPoints:parseInt(t.sumPoints),startingBalance:parseInt(t.startingBalance),auctionType:t.auctionType,showPoints:t.showPoints});return{options:n,players:s(n),game:d(n),optionInputs:e.optionInputs,view:I.AuctionView}})),Object(ae.a)(te,"START_NEW_ROUND",(function(e){return Object(l.a)({},e,{game:(t=e.game,Object(l.a)({},t,{round:t.round+1,bids:Array.from({length:t.bids.length},(function(){return 0})),finishedRound:!1})),players:e.players.map((function(e){return Object(l.a)({},e,{hiddenPoints:""})}))});var t})),Object(ae.a)(te,"FINISH_ROUND",(function(e){return function(e){var t;switch(e.game.auctionType){case P.Senior:if(e.players.length<=2){t=e.game.bids.map((function(e,t){return{playerId:t,bid:e}}));break}var n=m(e.game.bids);t=[n.first,n.second];break;case P.Vickrey:1===e.players.length&&(t=[{playerId:0,bid:e.game.bids[0]}]);var a=m(e.game.bids);t=[{playerId:a.first.playerId,bid:a.second.bid}];break;case P.AllPay:t=e.game.bids.map((function(e,t){return{playerId:t,bid:e}}));break;default:var r=Math.max.apply(Math,Object(u.a)(e.game.bids));t=[{playerId:e.game.bids.indexOf(r),bid:r}]}var i=t.map((function(e){return e.playerId})),o=e.players.map((function(e,n){return i.includes(n)?Object(l.a)({},e,{balance:e.balance-t.filter((function(e){return n===e.playerId}))[0].bid}):e})),c=f(e.game.bids);return Object(l.a)({},e,{players:o.map((function(t,n){return n===c?Object(l.a)({},t,{currentPoints:t.currentPoints+(e.options.showPoints?t.allPoints[e.game.round]:parseInt(t.hiddenPoints))}):t})),game:Object(l.a)({},e.game,{finishedRound:!0})})}(e)})),Object(ae.a)(te,"PLACE_BID",(function(e,t){return Object(l.a)({},e,{game:Object(l.a)({},e.game,{bids:e.game.bids.map((function(e,n){return n===t.payload.playerId?t.payload.bid:e}))}),players:e.players.map((function(n,a){return a!==t.payload.playerId?n:Object(l.a)({},n,{bidInput:"",balance:n.balance-y(e.game.auctionType)})}))})})),Object(ae.a)(te,"CHANGE_BID_INPUT",(function(e,t){return Object(l.a)({},e,{players:e.players.map((function(e,n){return n!==t.payload.playerId?e:Object(l.a)({},e,{bidInput:t.payload.newInput})}))})})),Object(ae.a)(te,"SWITCH_VIEW_AUCTION",(function(e){return Object(l.a)({},e,{view:I.AuctionView})})),Object(ae.a)(te,"SWITCH_VIEW_SETUP",(function(e){return Object(l.a)({},e,{view:I.SetupView})})),Object(ae.a)(te,"CHANGE_SETUP_FIELD",(function(e,t){return Object(l.a)({},e,{optionInputs:Object(l.a)({},e.optionInputs,Object(ae.a)({},t.payload.field,p(t.payload.value)?t.payload.value:e.optionInputs[t.payload.field]))})})),Object(ae.a)(te,"CHANGE_SETUP_AUCTION",(function(e,t){return Object(l.a)({},e,{optionInputs:Object(l.a)({},e.optionInputs,{auctionType:O[t.payload]})})})),Object(ae.a)(te,"CHANGE_SETUP_SHOW_POINTS",(function(e,t){return Object(l.a)({},e,{optionInputs:Object(l.a)({},e.optionInputs,{showPoints:t.payload})})})),Object(ae.a)(te,"CHANGE_HIDDEN_POINTS",(function(e,t){return Object(l.a)({},e,{players:e.players.map((function(e,n){return n!==t.payload.playerId?e:Object(l.a)({},e,{hiddenPoints:p(t.payload.newPoints)?t.payload.newPoints:e.hiddenPoints})}))})})),te)),ie=Object(ne.b)(re,T);o.a.render(r.a.createElement(C.a,{store:ie},r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.b3103108.chunk.js.map
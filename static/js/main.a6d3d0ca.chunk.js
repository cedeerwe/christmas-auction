(this["webpackJsonpchristmas-auction"]=this["webpackJsonpchristmas-auction"]||[]).push([[0],{33:function(e,t,n){e.exports=n(47)},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(17),i=n.n(u),l=n(16),c=n(5);function o(e,t,n){for(var a=Array.from({length:n},(function(){return 0})),r=0;r<Math.min(t,e*n);r++){var u=Math.floor(Math.random()*n);a[u]<e&&a[u]+1<=e&&(a[u]+=1)}return a}function s(e){return Array.from({length:e.numPlayers},(function(){return function(e){return{balance:e.startingBalance,currentPoints:0,bidInput:"",allPoints:o(e.maxPointsPerRound,e.sumPoints,e.numRounds)}}(e)}))}function m(e){return{round:0,maxRounds:e.numRounds,bids:Array.from({length:e.numPlayers},(function(){return 0})),auctionType:e.auctionType,finishedRound:!1}}function p(e){var t=parseInt(e);return!isNaN(t)&&t===parseFloat(e)&&t>0}function d(e,t,n,a){var r=parseInt(e);return!!isNaN(r)||(r!==parseFloat(e)||(r<=a||t-r-n<0))}function b(e){return e===f.BiddingFee?1:0}var E,f,h=n(9);!function(e){e[e.AuctionView=0]="AuctionView",e[e.SetupView=1]="SetupView"}(E||(E={})),function(e){e.English="English",e.Dutch="Dutch",e.Vickrey="Vickrey",e.AllPay="All pay",e.BiddingFee="Bidding Fee",e.Senior="Senior"}(f||(f={}));var y=Object.keys(f),g={numPlayers:10,maxPointsPerRound:10,numRounds:15,sumPoints:75,startingBalance:100,auctionType:f.English},I={numPlayers:g.numPlayers.toString(),maxPointsPerRound:g.maxPointsPerRound.toString(),numRounds:g.numRounds.toString(),sumPoints:g.sumPoints.toString(),startingBalance:g.startingBalance.toString(),auctionType:g.auctionType},P=[h.h,h.e,h.b,h.i,h.a,h.j,h.g,h.l,h.k,h.f,h.d,h.c],O={options:g,optionInputs:I,players:s(g),game:m(g),view:E.SetupView},v=n(12),A=n(19),T=n(10),j=Object(T.createAction)("START_NEW_AUCTION")(),R=Object(T.createAction)("START_NEW_ROUND")(),S=Object(T.createAction)("FINISH_ROUND")(),w=Object(T.createAction)("PLACE_BID")(),N=Object(T.createAction)("CHANGE_BID_INPUT")(),C=Object(T.createAction)("SWITCH_VIEW_SETUP")(),_=Object(T.createAction)("SWITCH_VIEW_AUCTION")(),k=Object(T.createAction)("CHANGE_SETUP_FIELD")(),B=Object(T.createAction)("CHANGE_SETUP_AUCTION")(),x=n(20),V=n(15),U=n(11),F=n(28),W=Object(v.b)((function(e){return{state:e}}),(function(e){return{finishRound:function(){return e(S())},newRound:function(){return e(R())},placeBid:function(t){return e(w(t))},changeBidInput:function(t){return e(N(t))},backToSetup:function(){return e(C())}}}))((function(e){return r.a.createElement(A.a,{style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement("h1",null,e.state.game.auctionType," auction"),r.a.createElement(V.a,null,r.a.createElement(x.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Round ",e.state.game.round+1," /"," ",e.state.options.numRounds),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t},r.a.createElement(F.a,{icon:P[t],size:"3x"}))})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Balances"),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t},e.balance)}))),r.a.createElement("tr",null,r.a.createElement("th",{style:{backgroundColor:"PaleGreen"}},"Total points"),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t,style:{backgroundColor:"PaleGreen"}},e.currentPoints)}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Points to score"),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},t.allPoints[e.state.game.round])}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Current bids"),e.state.game.bids.map((function(e,t){return r.a.createElement("th",{key:t},e)}))),r.a.createElement("tr",null,r.a.createElement("th",null,"New Bid"),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},r.a.createElement("div",null,r.a.createElement("input",{type:"number",style:{maxWidth:"57px"},value:t.bidInput,onChange:function(t){return e.changeBidInput({playerId:n,newInput:e.state.game.finishedRound?"":t.target.value})}})))}))),r.a.createElement("tr",null,r.a.createElement("th",null,e.state.game.finishedRound?r.a.createElement(U.a,{variant:"success",onClick:e.newRound,disabled:(t=e.state.game,t.round+1===t.maxRounds)},"Next Round"):r.a.createElement(U.a,{variant:"danger",disabled:0===Math.max.apply(Math,Object(l.a)(e.state.game.bids)),onClick:function(){return e.finishRound()}},"Finish!")),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},r.a.createElement(U.a,{disabled:d(t.bidInput,t.balance,b(e.state.game.auctionType),Math.max.apply(Math,Object(l.a)(e.state.game.bids))),onClick:function(){return e.placeBid({playerId:n,bid:parseInt(t.bidInput)})}},"BID!"))})))))),r.a.createElement(V.a,null,r.a.createElement(U.a,{variant:"info",onClick:e.backToSetup},"Back to setup")));var t})),D=n(13),H=n(30),M=Object(v.b)((function(e){return{state:e}}),(function(e){return{changeSetupField:function(t){return e(k(t))},switchViewToAuction:function(){return e(_())},changeSetupAuction:function(t){return e(B(t))},newAuction:function(){return e(j())}}}))((function(e){return r.a.createElement(A.a,null,r.a.createElement(x.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Attribute"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Number of Players"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.numPlayers,onChange:function(t){return e.changeSetupField({field:"numPlayers",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Number of Rounds"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.numRounds,onChange:function(t){return e.changeSetupField({field:"numRounds",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Max Points per Round"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.maxPointsPerRound,onChange:function(t){return e.changeSetupField({field:"maxPointsPerRound",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Total Points"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.sumPoints,onChange:function(t){return e.changeSetupField({field:"sumPoints",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Starting Balance"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.startingBalance,onChange:function(t){return e.changeSetupField({field:"startingBalance",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Auction Type"),r.a.createElement("th",null,r.a.createElement(H.a,{id:"auction-type-selector",title:e.state.optionInputs.auctionType,onSelect:function(t){return e.changeSetupAuction(parseInt(t))}},y.map((function(t,n){return r.a.createElement(D.a.Item,{eventKey:n.toString(),active:t===e.state.optionInputs.auctionType,key:n},t)}))))))),r.a.createElement(V.a,null,r.a.createElement(U.a,{variant:"success",disabled:(t=e.state.optionInputs,!(p(t.maxPointsPerRound)&&p(t.numPlayers)&&p(t.numRounds)&&p(t.startingBalance)&&p(t.sumPoints))),onClick:e.newAuction},"New Auction"),r.a.createElement(U.a,{variant:"info",onClick:e.switchViewToAuction},"Back to Auction")));var t})),G=Object(v.b)((function(e){return{view:e.view}}))((function(e){switch(e.view){case E.SetupView:return r.a.createElement(M,null);case E.AuctionView:return r.a.createElement(W,null)}})),L=(n(46),function(){return r.a.createElement(G,null)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J,z=n(18),K=n(8),$=Object(T.createReducer)(O,(J={},Object(K.a)(J,"START_NEW_AUCTION",(function(e){var t,n=(t=e.optionInputs,{maxPointsPerRound:parseInt(t.maxPointsPerRound),numRounds:parseInt(t.numRounds),numPlayers:parseInt(t.numPlayers),sumPoints:parseInt(t.sumPoints),startingBalance:parseInt(t.startingBalance),auctionType:t.auctionType});return{options:n,players:s(n),game:m(n),optionInputs:e.optionInputs,view:E.AuctionView}})),Object(K.a)(J,"START_NEW_ROUND",(function(e){return Object(c.a)({},e,{game:(t=e.game,Object(c.a)({},t,{round:t.round+1,bids:Array.from({length:t.bids.length},(function(){return 0})),finishedRound:!1}))});var t})),Object(K.a)(J,"FINISH_ROUND",(function(e){return function(e){var t;switch(e.game.auctionType){case f.Senior:if(e.players.length<=2){t=e.game.bids.map((function(e,t){return t}));break}for(var n=[-1,-1],a=[-1,-1],r=0;r<e.players.length;r++){var u=e.game.bids[r];u>n[0]?(a=n,n=[u,r]):u>a[0]&&(a=[u,r])}t=[n[1],a[1]];break;case f.AllPay:t=e.game.bids.map((function(e,t){return t}));break;default:t=[e.game.bids.indexOf(Math.max.apply(Math,Object(l.a)(e.game.bids)))]}var i=e.players.map((function(n,a){return t.includes(a)?Object(c.a)({},n,{balance:n.balance-e.game.bids[a]}):n})),o=e.game.bids.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]>e[0]?t:e}))[1];return Object(c.a)({},e,{players:i.map((function(t,n){return n===o?Object(c.a)({},t,{currentPoints:t.currentPoints+t.allPoints[e.game.round]}):t})),game:Object(c.a)({},e.game,{finishedRound:!0})})}(e)})),Object(K.a)(J,"PLACE_BID",(function(e,t){return Object(c.a)({},e,{game:Object(c.a)({},e.game,{bids:e.game.bids.map((function(e,n){return n===t.payload.playerId?t.payload.bid:e}))}),players:e.players.map((function(n,a){return a!==t.payload.playerId?n:Object(c.a)({},n,{bidInput:"",balance:n.balance-b(e.game.auctionType)})}))})})),Object(K.a)(J,"CHANGE_BID_INPUT",(function(e,t){return Object(c.a)({},e,{players:e.players.map((function(e,n){return n!==t.payload.playerId?e:Object(c.a)({},e,{bidInput:t.payload.newInput})}))})})),Object(K.a)(J,"SWITCH_VIEW_AUCTION",(function(e){return Object(c.a)({},e,{view:E.AuctionView})})),Object(K.a)(J,"SWITCH_VIEW_SETUP",(function(e){return Object(c.a)({},e,{view:E.SetupView})})),Object(K.a)(J,"CHANGE_SETUP_FIELD",(function(e,t){return Object(c.a)({},e,{optionInputs:Object(c.a)({},e.optionInputs,Object(K.a)({},t.payload.field,(n=t.payload.value,parseInt(n)===parseFloat(n)||isNaN(parseInt(n))?t.payload.value:e.optionInputs[t.payload.field])))});var n})),Object(K.a)(J,"CHANGE_SETUP_AUCTION",(function(e,t){return Object(c.a)({},e,{optionInputs:Object(c.a)({},e.optionInputs,{auctionType:y[t.payload]})})})),J)),q=Object(z.b)($,O);i.a.render(r.a.createElement(v.a,{store:q},r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.a6d3d0ca.chunk.js.map
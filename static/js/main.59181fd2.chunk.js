(this["webpackJsonpchristmas-auction"]=this["webpackJsonpchristmas-auction"]||[]).push([[0],{33:function(e,t,n){e.exports=n(47)},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(17),i=n.n(u),o=n(16),c=n(4);function l(e,t,n){for(var a=Array.from({length:n},(function(){return 0})),r=0;r<Math.min(t,e*n);r++){var u=Math.floor(Math.random()*n);a[u]<e&&a[u]+1<=e&&(a[u]+=1)}return a}function s(e){return Array.from({length:e.numPlayers},(function(){return function(e){return{balance:e.startingBalance,currentPoints:0,bidInput:"",allPoints:l(e.maxPointsPerRound,e.sumPoints,e.numRounds),hiddenPoints:""}}(e)}))}function p(e){return{round:0,maxRounds:e.numRounds,bids:Array.from({length:e.numPlayers},(function(){return 0})),auctionType:e.auctionType,finishedRound:!1}}function d(e){for(var t={first:{playerId:-1,bid:-1},second:{playerId:-1,bid:-1}},n=0;n<e.length;n++){var a=e[n];a>t.first.bid?(t.second=t.first,t.first={playerId:n,bid:a}):a>t.second.bid&&(t.second={bid:a,playerId:n})}return t}function m(e){return parseInt(e)===parseFloat(e)||isNaN(parseInt(e))}function b(e){var t=parseInt(e);return!isNaN(t)&&t===parseFloat(e)&&t>0}function h(e,t,n,a){var r=parseInt(e);return!!isNaN(r)||(r!==parseFloat(e)||(r<=a||t-r-n<0))}function y(e){return e===P.BiddingFee?1:0}function f(e){return e.map((function(e,t){return[e,t]})).reduce((function(e,t){return t[0]>e[0]?t:e}))[1]}function E(e){return e.round+1===e.maxRounds}function g(e){var t=f(e.game.bids);return function(e){var t=parseInt(e);return!isNaN(t)&&t===parseFloat(e)&&t>=0}(e.players[t].hiddenPoints)}var I,P,O=n(10);!function(e){e[e.AuctionView=0]="AuctionView",e[e.SetupView=1]="SetupView"}(I||(I={})),function(e){e.English="English",e.Dutch="Dutch",e.Vickrey="Vickrey",e.AllPay="AllPay",e.BiddingFee="BiddingFee",e.Senior="Senior"}(P||(P={}));var v=Object.keys(P),w={numPlayers:10,maxPointsPerRound:10,numRounds:15,sumPoints:75,startingBalance:50,auctionType:P.English,showPoints:!0},j={numPlayers:w.numPlayers.toString(),maxPointsPerRound:w.maxPointsPerRound.toString(),numRounds:w.numRounds.toString(),sumPoints:w.sumPoints.toString(),startingBalance:w.startingBalance.toString(),auctionType:w.auctionType,showPoints:w.showPoints},S=[O.h,O.e,O.b,O.i,O.a,O.j,O.g,O.l,O.k,O.f,O.d,O.c],A={options:w,optionInputs:j,players:s(w),game:p(w),view:I.SetupView},T=n(12),N=n(19),R=n(9),k=Object(R.createAction)("START_NEW_AUCTION")(),_=Object(R.createAction)("START_NEW_ROUND")(),C=Object(R.createAction)("FINISH_ROUND")(),B=Object(R.createAction)("PLACE_BID")(),x=Object(R.createAction)("CHANGE_BID_INPUT")(),H=Object(R.createAction)("SWITCH_VIEW_SETUP")(),U=Object(R.createAction)("SWITCH_VIEW_AUCTION")(),V=Object(R.createAction)("CHANGE_SETUP_FIELD")(),F=Object(R.createAction)("CHANGE_SETUP_AUCTION")(),W=Object(R.createAction)("CHANGE_SETUP_SHOW_POINTS")(),D=Object(R.createAction)("CHANGE_HIDDEN_POINTS")(),G=n(20),M=n(15),L=n(11),J=n(28),z=Object(T.b)((function(e){return{state:e}}),(function(e){return{finishRound:function(){return e(C())},newRound:function(){return e(_())},placeBid:function(t){return e(B(t))},changeBidInput:function(t){return e(x(t))},backToSetup:function(){return e(H())},changeHiddenPoints:function(t){return e(D(t))}}}))((function(e){return r.a.createElement(N.a,{style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement("h1",null,e.state.game.auctionType," auction"),r.a.createElement(M.a,null,r.a.createElement(G.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Round ",e.state.game.round+1," /"," ",e.state.options.numRounds),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t},r.a.createElement(J.a,{icon:S[t],size:"3x"}))})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Balances"),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t},e.balance)}))),r.a.createElement("tr",null,r.a.createElement("th",{style:{backgroundColor:"PaleGreen"}},"Total points"),e.state.players.map((function(e,t){return r.a.createElement("th",{key:t,style:{backgroundColor:"PaleGreen"}},e.currentPoints)}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Points to score"),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},e.state.options.showPoints?r.a.createElement("span",null,t.allPoints[e.state.game.round]):r.a.createElement("input",{type:"number",style:{maxWidth:"57px"},value:t.hiddenPoints,onChange:function(t){return e.changeHiddenPoints({playerId:n,newPoints:t.target.value})}}))}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Current bids"),e.state.game.bids.map((function(e,t){return r.a.createElement("th",{key:t},e)}))),r.a.createElement("tr",null,r.a.createElement("th",null,"New Bid"),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},r.a.createElement("div",null,r.a.createElement("input",{type:"number",style:{maxWidth:"57px"},value:t.bidInput,onChange:function(t){return e.changeBidInput({playerId:n,newInput:e.state.game.finishedRound?"":t.target.value})}})))}))),r.a.createElement("tr",null,r.a.createElement("th",null,e.state.game.finishedRound?r.a.createElement(L.a,{variant:"success",onClick:e.newRound,disabled:E(e.state.game)},"Next Round"):r.a.createElement(L.a,{variant:"danger",disabled:(t=e.state,!(t.options.showPoints&&Math.max.apply(Math,Object(o.a)(t.game.bids))>0||!t.options.showPoints&&g(t))),onClick:function(){return e.finishRound()}},"Finish!")),e.state.players.map((function(t,n){return r.a.createElement("th",{key:n},r.a.createElement(L.a,{disabled:h(t.bidInput,t.balance,y(e.state.game.auctionType),Math.max.apply(Math,Object(o.a)(e.state.game.bids))),onClick:function(){return e.placeBid({playerId:n,bid:parseInt(t.bidInput)})}},"BID!"))})))))),r.a.createElement(M.a,{className:"justify-content-between"},r.a.createElement(L.a,{variant:"secondary",onClick:e.newRound,disabled:E(e.state.game)},"Skip round"),r.a.createElement(L.a,{variant:"info",onClick:e.backToSetup},"Back to setup")));var t})),K=n(13),$=n(30),q=Object(T.b)((function(e){return{state:e}}),(function(e){return{changeSetupField:function(t){return e(V(t))},switchViewToAuction:function(){return e(U())},changeSetupAuction:function(t){return e(F(t))},newAuction:function(){return e(k())},changeSetupShowPoints:function(t){return e(W(t))}}}))((function(e){return r.a.createElement(N.a,null,r.a.createElement(G.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Attribute"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Number of Players"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.numPlayers,onChange:function(t){return e.changeSetupField({field:"numPlayers",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Number of Rounds"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.numRounds,onChange:function(t){return e.changeSetupField({field:"numRounds",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Max Points per Round"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.maxPointsPerRound,onChange:function(t){return e.changeSetupField({field:"maxPointsPerRound",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Total Points"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.sumPoints,onChange:function(t){return e.changeSetupField({field:"sumPoints",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Starting Balance"),r.a.createElement("th",null,r.a.createElement("input",{type:"number",value:e.state.optionInputs.startingBalance,onChange:function(t){return e.changeSetupField({field:"startingBalance",value:t.target.value})}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Auction Type"),r.a.createElement("th",null,r.a.createElement($.a,{id:"auction-type-selector",title:e.state.optionInputs.auctionType,onSelect:function(t){return e.changeSetupAuction(parseInt(t))}},v.map((function(t,n){return r.a.createElement(K.a.Item,{eventKey:n.toString(),active:t===e.state.optionInputs.auctionType,key:n},t)}))))),r.a.createElement("tr",null,r.a.createElement("th",null,"Show Points"),r.a.createElement("th",null,r.a.createElement("input",{type:"checkbox",checked:e.state.optionInputs.showPoints,onChange:function(t){return e.changeSetupShowPoints(t.target.checked)},style:{width:"30px",height:"30px"}}))))),r.a.createElement("hr",null),r.a.createElement(M.a,{className:"justify-content-between"},r.a.createElement(L.a,{variant:"success",disabled:(t=e.state.optionInputs,!(b(t.maxPointsPerRound)&&b(t.numPlayers)&&b(t.numRounds)&&b(t.startingBalance)&&b(t.sumPoints))),onClick:e.newAuction},"New Auction"),r.a.createElement(L.a,{variant:"info",onClick:e.switchViewToAuction},"Back to Auction")));var t})),Q=Object(T.b)((function(e){return{view:e.view}}))((function(e){switch(e.view){case I.SetupView:return r.a.createElement(q,null);case I.AuctionView:return r.a.createElement(z,null)}})),X=(n(46),function(){return r.a.createElement("div",{style:{left:0,right:0,width:"100%",height:"100vh",backgroundImage:"url(background.jpg)",backgroundColor:"hsla(0,0%,100%,0.85)",backgroundBlendMode:"overlay",opacity:1}},r.a.createElement(Q,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y,Z=n(18),ee=n(7),te=Object(R.createReducer)(A,(Y={},Object(ee.a)(Y,"START_NEW_AUCTION",(function(e){var t,n=(t=e.optionInputs,{maxPointsPerRound:parseInt(t.maxPointsPerRound),numRounds:parseInt(t.numRounds),numPlayers:parseInt(t.numPlayers),sumPoints:parseInt(t.sumPoints),startingBalance:parseInt(t.startingBalance),auctionType:t.auctionType,showPoints:t.showPoints});return{options:n,players:s(n),game:p(n),optionInputs:e.optionInputs,view:I.AuctionView}})),Object(ee.a)(Y,"START_NEW_ROUND",(function(e){return Object(c.a)({},e,{game:(t=e.game,Object(c.a)({},t,{round:t.round+1,bids:Array.from({length:t.bids.length},(function(){return 0})),finishedRound:!1})),players:e.players.map((function(e){return Object(c.a)({},e,{hiddenPoints:""})}))});var t})),Object(ee.a)(Y,"FINISH_ROUND",(function(e){return function(e){var t;switch(e.game.auctionType){case P.Senior:if(e.players.length<=2){t=e.game.bids.map((function(e,t){return{playerId:t,bid:e}}));break}var n=d(e.game.bids);t=[n.first,n.second];break;case P.Vickrey:1===e.players.length&&(t=[{playerId:0,bid:e.game.bids[0]}]);var a=d(e.game.bids);t=[{playerId:a.first.playerId,bid:a.second.bid}];break;case P.AllPay:t=e.game.bids.map((function(e,t){return{playerId:t,bid:e}}));break;default:var r=Math.max.apply(Math,Object(o.a)(e.game.bids));t=[{playerId:e.game.bids.indexOf(r),bid:r}]}var u=t.map((function(e){return e.playerId})),i=e.players.map((function(e,n){return u.includes(n)?Object(c.a)({},e,{balance:e.balance-t.filter((function(e){return n===e.playerId}))[0].bid}):e})),l=f(e.game.bids);return Object(c.a)({},e,{players:i.map((function(t,n){return n===l?Object(c.a)({},t,{currentPoints:t.currentPoints+(e.options.showPoints?t.allPoints[e.game.round]:parseInt(t.hiddenPoints))}):t})),game:Object(c.a)({},e.game,{finishedRound:!0})})}(e)})),Object(ee.a)(Y,"PLACE_BID",(function(e,t){return Object(c.a)({},e,{game:Object(c.a)({},e.game,{bids:e.game.bids.map((function(e,n){return n===t.payload.playerId?t.payload.bid:e}))}),players:e.players.map((function(n,a){return a!==t.payload.playerId?n:Object(c.a)({},n,{bidInput:"",balance:n.balance-y(e.game.auctionType)})}))})})),Object(ee.a)(Y,"CHANGE_BID_INPUT",(function(e,t){return Object(c.a)({},e,{players:e.players.map((function(e,n){return n!==t.payload.playerId?e:Object(c.a)({},e,{bidInput:t.payload.newInput})}))})})),Object(ee.a)(Y,"SWITCH_VIEW_AUCTION",(function(e){return Object(c.a)({},e,{view:I.AuctionView})})),Object(ee.a)(Y,"SWITCH_VIEW_SETUP",(function(e){return Object(c.a)({},e,{view:I.SetupView})})),Object(ee.a)(Y,"CHANGE_SETUP_FIELD",(function(e,t){return Object(c.a)({},e,{optionInputs:Object(c.a)({},e.optionInputs,Object(ee.a)({},t.payload.field,m(t.payload.value)?t.payload.value:e.optionInputs[t.payload.field]))})})),Object(ee.a)(Y,"CHANGE_SETUP_AUCTION",(function(e,t){return Object(c.a)({},e,{optionInputs:Object(c.a)({},e.optionInputs,{auctionType:v[t.payload]})})})),Object(ee.a)(Y,"CHANGE_SETUP_SHOW_POINTS",(function(e,t){return Object(c.a)({},e,{optionInputs:Object(c.a)({},e.optionInputs,{showPoints:t.payload})})})),Object(ee.a)(Y,"CHANGE_HIDDEN_POINTS",(function(e,t){return Object(c.a)({},e,{players:e.players.map((function(e,n){return n!==t.payload.playerId?e:Object(c.a)({},e,{hiddenPoints:m(t.payload.newPoints)?t.payload.newPoints:e.hiddenPoints})}))})})),Y)),ne=Object(Z.b)(te,A);i.a.render(r.a.createElement(T.a,{store:ne},r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.59181fd2.chunk.js.map